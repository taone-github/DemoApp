if("undefined"==typeof jQuery)throw new Error("MasterWeb requires jQuery");$.MasterWeb={_version:function(){},info:function(){var e=$.fn.jquery;alert("Version: @MAJORVERSION@.@MINORVERSION@.@MICROVERSION@_r@BUILDID@\nDate: @BUILDDATE@\njQuery Version "+e+"\njQuery UI Version "+($.ui?$.ui.version||"pre 1.6":"jQuery-UI not detected"))},contextPath:CONTEXTPATH,_smartData:{instance:null,inShow:!0},reloadSmartImage:function(e){null!=$.MasterWeb._smartData.instance&&($.MasterWeb._smartData.inShow&&$.MasterWeb.loading("#smart_data"),ajax(CONTEXTPATH+"/entity/image-viewer.jsp?actionModule="+e+"&"+$("form[name=masterForm]").serialize(),function(e){$("#imageViewerEntityLeft").html(e).css("min-height",$.MasterWeb.number(window.parent.$(".content-wrapper").css("height"))-$(".spacetop").outerHeight()),$("#smart_data").css("height",$("#smart_data").parent().innerHeight()),$.MasterWeb._smartData.inShow&&$.MasterWeb.loading("remove")}))},toggleSmartImage:function(){$.MasterWeb._smartData.inShow=!$.MasterWeb._smartData.inShow,$.MasterWeb._smartData.inShow&&$("#img-controller-colapse-collpased").css("display","none"),$("#imageViewerEntityLeft").toggle("slow",function(){$.MasterWeb._smartData.inShow?$("#imageViewerEntityRight").removeClass("col-md-12").addClass("col-md-6"):($("#imageViewerEntityRight").removeClass("col-md-6").addClass("col-md-12"),$("#img-controller-colapse-collpased").css("display","block"))})},loading:function(e){if(e){if("remove"===e)return jQuery("#blockUIDiv").css("display","none"),jQuery("#loaderDiv").css("display","none"),void jQuery("select").css("display","");var t=$(e);t.length>1?alert("Multiple element are not supported."):t.is(":visible")&&(jQuery("#blockUIDiv").css("display",""),jQuery("#blockUIDiv").css({display:"block",opacity:"0.7",width:t.width(),height:t.height(),position:"absolute",left:"0",top:"0",background:"#000","z-index":"330"}),jQuery("#loaderDiv").css("display",""),jQuery("#loaderDiv").css({position:"absolute",display:"block",width:50,height:50,"z-index":"330",left:t.width()/2-25,top:t.height()/2-25}))}},message:function(e,t){if(t&&$.isArray(t)&&t.length>0)for(var a=0;a<t.length;a++)e=e.replace("${"+(a+1)+"}",t[a]);return e},number:function(e){return void 0!=e&&""!=e&&null!=e?e.replace(/[^-\d\.]/g,""):""}};var hasFile=!1;function displayJSON(e){try{var t=$.parseJSON(e);if($.isEmptyObject(t))return;$.map(t,function(e){try{var t=document.getElementById(e.id);if(null!=t)if(void 0!==t.type)switch(t.type.toLowerCase()){case"input":break;case"hidden":case"select":case"select-one":$(t).val(e.value);break;case"textarea":break;case"text":$(t).val(e.value)}else $("[id$="+e.id+"]").each(function(){switch(this.tagName.toLowerCase()){case"table":$(t).append(e.value);break;case"div":case"td":case"tr":case"span":case"textarea":$(t).html(e.value)}});else{var a=$("[name='"+e.id+"']"),n=a.prop("tagName").toLowerCase();if(void 0!=n)if("input"==n){if(void 0!==a.attr("type"))switch(a.attr("type").toLowerCase()){case"input":break;case"hidden":case"select":case"select-one":$("[name='"+e.id+"']").val(e.value);break;case"textarea":break;case"text":case"textbox":$("[name='"+e.id+"']").val(e.value);break;case"checkbox":break;case"radio":$("input[name='"+e.id+"'][value='"+e.value+"']").prop("checked",!0)}}else"select"==n?$("[name='"+e.id+"']").val(e.value):"textarea"==n&&$("[name='"+e.id+"']").html(e.value)}}catch(e){}})}catch(e){}}FileInput=function(e,t){var a=this;a.$element=$(e),a._init(t),a._listen()},FileInput.prototype={constructor:FileInput,_init:function(e){var t=this;fileNameTemp="",fileIDTemp="",hasFile=!1,t.options=e,t.$container=t.$element.closest(".file-caption-main"),t.$const={uploadingClass:"fa fa-circle-o-notch fa-spin",downloadClass:"glyphicon glyphicon-download-alt",uploadedClass:"glyphicon glyphicon-ok",uploadFailClass:"glyphicon glyphicon-remove",uploadUrl:$.MasterWeb.contextPath+"/web/rest/files/upload",downloadUrl:$.MasterWeb.contextPath+"/web/rest/files/{id}/download?mimetype="};var a=t.$container,n=a.find(".file-caption"),o=a.find(".input-group-btn"),i=t.$element;t.$mfID=i.attr("mf-id"),t.$captionIcon=n.find("[obj=caption-icon]"),t.$captionDiv=n.find(".caption-div"),t.$removeBtn=o.find("[button-name=remove-btn]"),t.$downloadBtn=o.find("[button-name=download-btn]"),t.$uploadBtn=o.find("[button-name=upload-btn]"),t.$cancelBtn=o.find("[button-name=cancel-btn]"),t.$browseBtn=o.find("[button-name=browse-btn]"),t.$fileInput=a.find("[mf-id="+t.$mfID+"][type=hidden]"),""!=t.$fileInput.val()&&(t.$captionIcon.removeClass(),t.$captionIcon.addClass(t.$const.downloadClass),t.$captionIcon.attr("title","Download"),t.$captionIcon.on("click",$.proxy(t._downloadClick,t)),t.$captionIcon.css("cursor","pointer"),fileNameTemp=$(".caption-div").text(),fileIDTemp=t.$fileInput.val(),hasFile=!0)},_listen:function(){var e=this;e.$element.on("change",$.proxy(e._fileChange,e)),e.$removeBtn.on("click",$.proxy(e._removeClick,e)),e.$downloadBtn.on("click",$.proxy(e._downloadClick,e)),e.$uploadBtn.on("click",$.proxy(e._uploadClick,e)),e.$cancelBtn.on("click",$.proxy(e._closeDialog,e))},_fileChange:function(){var e,t,a=this,n=a.$element;if(n){if(0==(e=n.target?n.target.files||{}:void 0!==n[0].files?n[0].files||{}:n.val()?[{name:n.val().replace(/^.+\\/,"")}]:[]).length)return void a._removeClick();t=e[0],a.$files=e,a._reset(),a.$captionDiv.html(t.name),a.$removeBtn.removeClass("hide"),a.$uploadBtn.removeClass("hide"),a.$cancelBtn.removeClass("hide"),$("#uploadFT041_dialog_"+a.$mfID).dialog(options,{modal:!0,close:function(e,t){a._closeDialog()}}),unblockScreen()}},_uploadClick:function(){var e,t,a,n,o=this,i=o.$element;a=i.target?i.target.files||{}:void 0!==i[0].files?i[0].files||{}:i.val()?[{name:i.val().replace(/^.+\\/,"")}]:[],n=a[0],o.$captionIcon.removeClass(),o.$captionIcon.addClass(o.$const.uploadingClass),blockScreen(),e=function(e){unblockScreen(),e?"SUCCESS"==e.message?(fileNameTemp=n.name,fileIDTemp=e.id,hasFile=!0,o.$fileInput.val(fileIDTemp),o.$captionIcon.removeClass(),o.$captionIcon.addClass(o.$const.uploadedClass),setTimeout(function(){o.$captionIcon.removeClass(),$.proxy(o.$captionIcon.addClass(o.$const.downloadClass),o)},1e3),o.$captionIcon.attr("title","Download"),o.$captionIcon.on("click",$.proxy(o._downloadClick,o)),o.$captionIcon.css("cursor","pointer"),o.$uploadBtn.addClass("hide"),o.$cancelBtn.addClass("hide"),$("#uploadFT041_dialog_"+o.$mfID).dialog("destroy"),o.$element.val("")):(o.$captionIcon.removeClass(),$("#uploadFT041_error_"+o.$mfID).html("<font color='red'>"+e.message+"</font>")):o._showError("")},t=function(e,t,a){o._showError("Upload error mf-id="+o.$mfID+" "+e.status+" : "+e.statusText),o.$captionIcon.removeClass(),o.$captionIcon.addClass(o.$const.uploadFailClass)},o._upload(e,t)},_removeClick:function(){this._reset(),this.$element.val(""),fileNameTemp="",fileIDTemp="",hasFile=!1},_downloadClick:function(){var e=this;console.log("Download FileId="+e.$fileInput.val()),window.open(e.$const.downloadUrl.replace("{id}",e.$fileInput.val()))},_showError:function(e,t,a){console.error(e)},_upload:function(e,t){var a=this.$files[0],n=new FormData;n.append("file",a,a.name),$.ajax({url:this.$const.uploadUrl,type:"POST",data:n,dataType:"json",cache:!1,processData:!1,contentType:!1,success:e,error:t})},_reset:function(){var e=this;e.$captionIcon.removeClass(),e.$captionDiv.html(""),e.$removeBtn.addClass("hide"),e.$downloadBtn.addClass("hide"),e.$uploadBtn.addClass("hide"),e.$cancelBtn.addClass("hide"),e.$fileInput.val(""),e.$captionIcon.off("click")},_closeDialog:function(){var e=this;e._reset(),e.$element.val(""),hasFile&&(e.$captionDiv.html(fileNameTemp),e.$removeBtn.removeClass("hide"),e.$fileInput.val(fileIDTemp),e.$captionIcon.addClass(e.$const.downloadClass),e.$captionIcon.on("click",$.proxy(e._downloadClick,e))),$("#uploadFT041_dialog_"+e.$mfID).dialog("destroy"),$("#uploadFT041_error_"+e.$mfID).html("")},_clearDialog:function(){$("#uploadFT041_error_"+self.$mfID).html("")}},function(e){e.datepicker.regional.th={changeMonth:!0,changeYear:!0,buttonImageOnly:!0,buttonImage:"images/calendar.gif",dateFormat:"dd/mm/yy",dayNames:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],dayNamesMin:["อา","จ","อ","พ","พฤ","ศ","ส"],monthNames:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthNamesShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],constrainInput:!0,yearRange:"-400:+100",buttonText:"เลือก",yearOffSet:543,showButtonPanel:!1,prevText:"&laquo;&nbsp;ย้อน",prevStatus:"",prevJumpText:"&#x3c;&#x3c;",prevJumpStatus:"",nextText:"ถัดไป&nbsp;&raquo;",nextStatus:"",nextJumpText:"&#x3e;&#x3e;",nextJumpStatus:"",currentText:"วันนี้",currentStatus:"",todayText:"วันนี้",todayStatus:"",clearText:"-",clearStatus:"",closeText:"ปิด",closeStatus:"",yearStatus:"",monthStatus:"",weekText:"Wk",weekStatus:"",showOn:"button",buttonImage:"images/calendar_new.png",beforeShow:function(e,t){t.dpDiv.css({"font-size":"12px"})},onSelect:function(t,a){e(this).focus()},onClose:function(){}},e.datepicker.regional.en={changeMonth:!0,changeYear:!0,buttonImageOnly:!0,dateFormat:"dd/mm/yy",constrainInput:!0,yearRange:"-400:+100",yearOffSet:0,showButtonPanel:!1,showOn:"button",buttonImage:"images/calendar_new.png",onSelect:function(t,a){e(this).focus()},onClose:function(){}},e.fn.fileinput=function(e){this.each(function(){new FileInput(this,e)})},e(".rightcontent").ready(function(){e(".100ScreenHeight").css("min-height",e.MasterWeb.number(window.parent.$(".content-wrapper").css("height"))-e(".spacetop").outerHeight()),e("#smart_data").css("height",e("#smart_data").parent().innerHeight())}),e(document).keydown(function(e){return 116!=(e.which||e.keyCode)})}(jQuery);